<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
        <title>Register form</title>
    </head>
    
    <body data-aos-easing="ease" data-aos-duration="400" data-aos-delay="0" style="background:#349D90";>
        <div class="container mt-5"  style="font-family: 'Futura', Nunito, Intertype, Jost, Spartan, Trebuchet MS, Arial, sans-serif; font:bolder; color: white;">
            <h1 class="text-center mb-4"><b>Register</b></h1>
            <form onsubmit="signup(event)">
                <div id="form_content_inner_container" class="mb-3">
                    <label for="firstName" class="form-label"><h2>First Name</h2></label>
                    <input type="text" class="form-control" id="firstName" placeholder="First Name">
                    
                    <br>

                    <label for="lastName" class="form-label"><h2>Last Name</h2></label>
                    <input type="text" class="form-control" id="lastName" placeholder="Last Name">

                    <br>
                    <label for="email" class="form-label mt-3"><h2>Email</h2></label>
                    <input type="email" class="form-control" id="email" placeholder="Email">

                    <br>

                    <label for="password" class="form-label mt-3"><h2>Password</h2></label>
                    <input type="password" class="form-control" id="password" placeholder="Password">
                </div>
            <div id="form_button_container" class="text-center">
                <button id="signupinp" type="submit" class="btn btn-primary" value="Register">Register</button>
            </div>
        </form>
    </div>
</body>

<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js';
    import { getAuth, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.18.0/firebase-auth.js';
    import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js';

    const firebaseConfig = {
    apiKey: "AIzaSyBHIHD0PDT5IPyomztjZXjGY3_AdTsIfj0",
    authDomain: "qm-se-20.firebaseapp.com",
    databaseURL: "https://qm-se-20-default-rtdb.firebaseio.com",
    projectId: "qm-se-20",
    storageBucket: "qm-se-20.appspot.com",
    messagingSenderId: "830582484400",
    appId: "1:830582484400:web:c2a7f77ab61f1344f03a75"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    function signup(event) {
    event.preventDefault();
    var firstName = document.getElementById("firstName").value;
    var lastName = document.getElementById("lastName").value;
    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value;

    createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
        const user = userCredential.user;

        // Set user data in the database
        set(ref(db, `users/${user.uid}`), {
            firstName: firstName,
            lastName: lastName,
            email: email,
            uid: user.uid,
        });

        // Redirect to a success page
        })
        .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        alert(errorMessage);
        });
    }

    document.getElementById("signupinp").addEventListener("click", signup);



  </script>

</html>
